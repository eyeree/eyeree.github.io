<!DOCTYPE html>
<html lang="en">
  <head>
    <meta content="width=device-width,initial-scale=1" name="viewport">    
    <meta charset="utf-8" />
    <title>IParT</title>
    <script type="module">var ge=Object.defineProperty;var xe=(i,e,a)=>e in i?ge(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a;var I=(i,e,a)=>(xe(i,typeof e!="symbol"?e+"":e,a),a);function ye(i,e,a,o,t){console.error(i,e,a,o,t);let r=document.createElement("span"),d=typeof i=="string"?i:t?.message??"an error has occurred";r.innerText="("+d+")",document.body.replaceChildren(r)}window.onerror=ye;var we=4e3,G=class{constructor(e){this.info=e;e.addStat("particles",()=>this.particles.size)}particles=new Set;get count(){return this.particles.size}get isFull(){return this.particles.size>=we}add(e){this.isFull?console.warn("too many particles"):this.particles.add(e)}remove(e){this.particles.delete(e)}forEach(e){this.particles.forEach(e)}};var B=_e();function _e(){try{let i=Number.parseInt(window.location.hash.substring(1));if(isNaN(i))throw new Error(`could not parse "${window.location.hash.substring(1)}" as an integer`);return i}catch(i){throw new Error(`url fragment must be the token id \u279C ${i}`)}}var ae=Ee(B),f=(i,e)=>ae()*(e-i)+i,x=(i,e)=>f(i,e)*Math.sign(ae()-.5),ve=(i,e)=>Math.floor(f(i,e));var D=(i,e=0)=>i[ve(e,i.length)];function Ee(i){return function(){var e=i+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}}var c=(i,e={})=>D(Object.values(i).filter(a=>typeof a=="number").flatMap(a=>new Array(e[a]??1).fill(a)));var T=(r=>(r[r.Interior=0]="Interior",r[r.Top=1]="Top",r[r.Bottom=2]="Bottom",r[r.Left=3]="Left",r[r.Right=4]="Right",r))(T||{}),U=(t=>(t[t.Point=0]="Point",t[t.Small=.1]="Small",t[t.Medium=.33]="Medium",t[t.Large=1]="Large",t))(U||{}),N=(t=>(t[t.Spattering=1]="Spattering",t[t.Moderate=.2]="Moderate",t[t.Heavy=.1]="Heavy",t[t.Copious=.05]="Copious",t))(N||{}),O=(o=>(o[o.Slow=30]="Slow",o[o.Medium=100]="Medium",o[o.Fast=200]="Fast",o))(O||{}),Me={[0]:0,[.1]:15,[.33]:10,[1]:2},re=.05,k=.1,De=-.2,Se=.2,oe=-.2,ne=.2,F=class{constructor(e,a,o){this.resize=a;this.position=o;if(this.location==0)this.min_x=f(k,1-k),this.min_y=f(k,1-k),this.max_x=this.min_x,this.max_y=this.min_y;else{let[t,r]=this.getEdgeRange();switch(this.location){case 1:this.min_x=t,this.max_x=r,this.min_y=0,this.max_y=0;break;case 2:this.min_x=t,this.max_x=r,this.min_y=1,this.max_y=1;break;case 3:this.min_x=0,this.max_x=0,this.min_y=t,this.max_y=r;break;case 4:this.min_x=1,this.max_x=1,this.min_y=t,this.max_y=r;break;default:throw new Error(`unhandled location: ${T[this.location]}`)}}e.addStat("emitter location",T[this.location]),e.addStat("emitter size",U[this.size]),e.addStat("emitter volume",N[this.volume]),e.addStat("emitter velocity",O[this.speed])}size=c(U,{[0]:0});location=this.size==0?0:c(T,{[0]:0});min_x;min_y;max_x;max_y;volume=c(N);speed=c(O);divergence=Me[this.size];next=0;getEdgeRange(){if(this.size==1)return[0,1];{let e=this.size/2,a=f(re+e,1-re-e);return[a-e,a+e]}}emit(e){return this.next-=e,this.next>0?!1:(this.next=this.volume+this.volume*f(De,Se),!0)}init_position(e){switch(e.x=f(this.min_x,this.max_x)*this.resize.width,e.y=f(this.min_y,this.max_y)*this.resize.height,this.location){case 0:e.x-=f(-2,2),e.y-=f(-2,2);break;case 1:e.y-=e.radius,e.edgeDetect=!1;break;case 2:e.y+=e.radius,e.edgeDetect=!1;break;case 3:e.x-=e.radius,e.edgeDetect=!1;break;case 4:e.x+=e.radius,e.edgeDetect=!1;break}}update(e){if(!e.edgeDetect)switch(this.location){case 0:break;case 1:e.y>=e.radius&&(e.edgeDetect=!0);break;case 2:e.y<this.resize.height-e.radius&&(e.edgeDetect=!0);break;case 3:e.x>=e.radius&&(e.edgeDetect=!0);break;case 4:e.x<this.resize.width-e.radius&&(e.edgeDetect=!0);break}}init_speed(e){if(this.location===0){let a=f(0,Math.PI*2),o=this.speed+this.speed*f(oe,ne),t=Math.sin(a)*o,r=Math.cos(a)*o;e.dx+=t,e.dy+=r}else{let a=this.speed+this.speed*f(oe,ne),o=x(0,this.divergence),t,r;switch(this.location){case 1:r=o,t=a-this.position.gravity;break;case 2:r=o,t=-(a+this.position.gravity);break;case 3:r=a,t=o-this.position.gravity/2;break;case 4:r=-a,t=o-this.position.gravity/2;break}e.dx+=r,e.dy+=t}}};var z=class{info=document.getElementById("info");stats=document.getElementById("stats");token_id=document.getElementById("token_id");updateFunctions=new Set;interval=-1;constructor(){this.token_id.innerText=B.toString()}addStat(e,a){let o=document.createElement("dt");o.innerText=e;let t=document.createElement("dd");switch(typeof a){case"number":t.innerText=a.toString();break;case"string":t.innerText=a.toLowerCase().replace("_"," ");break;case"function":this.updateFunctions.add(()=>t.innerText=a().toString());break}this.stats.append(o,t)}updateInfo(){for(let e of this.updateFunctions)e()}showInfo(){this.updateInfo(),this.info.classList.remove("hidden"),this.interval=setInterval(()=>this.updateInfo(),1e3)}hideInfo(){this.info.classList.add("hidden"),clearInterval(this.interval),this.interval=-1}get isVisible(){return this.interval!=-1}};var H=class{static traceOne(){}static toggleTrace(){}static startTrace(){}static stopTrace(){}trace=!1;died(){}};I(H,"isTracing",!1);var S=class extends H{x=0;y=0;dx=0;dy=0;health=0;life=0;age=0;style="";radius=0;edgeDetect=!0;swallowed=!1;get isOld(){return this.age>this.life}get isDead(){return this.health<=0}kill(){this.health=0,this.died()}forceFrom(e,a,o){let t=e-this.x,r=a-this.y,d=Math.sqrt(t*t+r*r),s=1/d*o,n=Math.atan2(r,t),l=Math.cos(n)*s,h=Math.sin(n)*s;return[l,h,d]}get speed(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)}};var se=(a=>(a[a.Push=0]="Push",a[a.Pull=1]="Pull",a))(se||{}),X=(o=>(o[o.Weak=1e4]="Weak",o[o.Medium=15e3]="Medium",o[o.Strong=2e4]="Strong",o))(X||{}),de=20,C=50,K=class{constructor(e,a,o,t,r,d){this.info=e;this.context=a;this._frame=o;this.swallower=t;this.particles=r;this.resize=d;e.addStat("mouse strength",`${X[this.strength].toLocaleLowerCase()}`);let s=this.context.canvas;s.onpointermove=n=>{if(!this.interacting){if(this.draggingSwallower){let l=n.x-this.pointer_x,h=n.y-this.pointer_y,u=t.x,y=t.y;t.x=Math.max(C,Math.min(d.width-C,t.x+l)),t.y=Math.max(C,Math.min(d.height-C,t.y+h)),l=t.x-u,h=t.y-y,r.forEach(_=>{_.swallowed&&(_.x+=l,_.y+=h)})}}this.pointer_x=n.x,this.pointer_y=n.y},s.onpointerdown=n=>(n.buttons==1&&n.button==0&&(this.info.isVisible?this.info.hideInfo():(this.isOnSwallower(n)?this.draggingSwallower=!0:this.interacting=!0,this.pointer_x=n.x,this.pointer_y=n.y,s.setPointerCapture(n.pointerId))),n.preventDefault(),n.stopPropagation(),!1),s.onpointerup=n=>{(this.interacting||this.draggingSwallower)&&(this.interacting=!1,this.draggingSwallower=!1,this.pointer_x=n.x,this.pointer_y=n.y,s.releasePointerCapture(n.pointerId))},this.show_info.onclick=()=>{e.isVisible?e.hideInfo():e.showInfo()},document.fullscreenEnabled?this.full_screen.onclick=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}:this.full_screen.classList.add("hidden")}show_info=document.getElementById("show_info");full_screen=document.getElementById("full_screen");pointer_x=0;pointer_y=0;mode=c(se,{[1]:0});strength=c(X);frame_strength=0;interacting=!1;draggingSwallower=!1;restart=!1;isOnSwallower(e){let a=this.swallower.x-e.x,o=this.swallower.y-e.y;return Math.sqrt(a*a+o*o)<=this.swallower.radius}frame(e){!this.interacting||(this.frame_strength=this.strength*e)}update(e){if(!this.interacting||e.swallowed)return;let[a,o,t]=e.forceFrom(this.pointer_x,this.pointer_y,this.frame_strength);switch(this.mode){case 0:e.dx-=a,e.dy-=o;break;case 1:if(t<=de){let r=t/de;e.dx=a*r,e.dy=o*r}else e.dx+=a,e.dy+=o;break;default:throw new Error("")}}};var A=class{constructor(e){this.info=e;e.addStat("fps",()=>Math.round(this.fps))}last=performance.now();count=0;elapsed=0;fps=0;debugMode=!1;advanceDebugFrame=!1;getDT(e){let a=(e-this.last)/1e3;return this.last=e,this.count++,this.elapsed+=a,this.elapsed>=1&&(this.fps=this.count,this.count=0,this.elapsed=0),this.debugMode?1/3e3:a>A.MAX_DT?A.MAX_DT:a}nextDebugFrame(){this.advanceDebugFrame=!0}},R=A;I(R,"MAX_DT",1/30);var W=class{constructor(e,a,o){this.info=e;this.context=a;this.particles=o;let t=()=>{this.dpr=window.devicePixelRatio||1;let r=a.canvas.getBoundingClientRect(),d=r.width/this.width,s=r.height/this.height;this.width=r.width,this.height=r.height,a.canvas.width=r.width*this.dpr,a.canvas.height=r.height*this.dpr,a.scale(this.dpr,this.dpr),o.forEach(n=>{n.x*=d,n.y*=s})};window.onresize=t,t(),e.addStat("window",()=>`${a.canvas.clientWidth}x${a.canvas.clientHeight}`),e.addStat("dpr",()=>window.devicePixelRatio)}width=0;height=0;dpr=0};function ce(i){return i*i*i}function le(i){return i*i}var $=(r=>(r[r.None=0]="None",r[r.Small=6e3]="Small",r[r.Medium=12e3]="Medium",r[r.Large=24e3]="Large",r[r.Huge=48e3]="Huge",r))($||{}),Pe={[0]:0,[6e3]:15,[12e3]:25,[24e3]:35,[48e3]:40},q=class{constructor(e,a){this.scale=a;this.x=this.scale.width*f(.1,.8),this.y=this.scale.height*f(.1,.8),e.addStat("swallower",$[this.strength].toLowerCase())}strength=c($,{[0]:0});radius=Pe[this.strength];x;y;frame_strength=0;frame(e){this.strength!=0&&(this.frame_strength=this.strength*e)}update(e,a){if(this.strength==0)return;let[o,t,r]=e.forceFrom(this.x,this.y,this.frame_strength);if((r<e.radius?0:r-e.radius)<=this.radius){let s=this.radius+e.radius,n=r>s?0:1-r/s,l=e.dx,h=e.dy,u=1-le(n);e.dx*=u,e.dy*=u,e.dx+=o*u,e.dy+=t*u,e.health-=.5*a*n,e.swallowed=!0}else e.dx+=o,e.dy+=t,e.swallowed=!1}};var fe=(a=>(a[a.Kill=0]="Kill",a[a.Bounce=1]="Bounce",a))(fe||{}),Q=(t=>(t[t.None=0]="None",t[t.Low=.25]="Low",t[t.Medium=.5]="Medium",t[t.High=1]="High",t))(Q||{}),Y=(t=>(t[t.None=0]="None",t[t.Low=50]="Low",t[t.Medium=150]="Medium",t[t.High=300]="High",t))(Y||{}),he=0,j=class{constructor(e,a,o){this.canvas=a;this.scale=o;e.addStat("friction",Q[this.friction].toLowerCase()),e.addStat("gravity",Y[this.gravity])}friction=c(Q);frame_friction=0;gravity=c(Y);frame_gravity=0;minDeflection=f(5,15);maxDeflection=f(15,20);edgeMode=c(fe);edgeDetect={[0]:e=>this.edgeKill(e),[1]:e=>this.edgeBounce(e)}[this.edgeMode];frame(e){this.frame_friction=1-this.friction*e,this.frame_gravity=this.gravity*e}update(e,a){if(e.age<he){if(!e.swallowed){let o=ce(e.age/he),t=1-this.friction*a*o;e.dx*=t,e.dy*=t,e.dy+=this.frame_gravity*o}}else e.swallowed||(e.dx*=this.frame_friction,e.dy*=this.frame_friction,e.dy+=this.frame_gravity);e.x+=e.dx*a,e.y+=e.dy*a,e.edgeDetect&&this.edgeDetect(e)}edgeBounce(e){e.x<0+e.radius?(e.x=e.radius,Math.abs(e.dy)<.5&&(e.dy=x(this.minDeflection,this.maxDeflection)),e.dx=-e.dx):e.x>this.scale.width-e.radius?(e.x=this.scale.width-e.radius,Math.abs(e.dy)<.5&&(e.dy=x(this.minDeflection,this.maxDeflection)),e.dx=-e.dx):e.y<0+e.radius?(e.y=e.radius,Math.abs(e.dx)<.5&&(e.dx=x(this.minDeflection,this.maxDeflection)),e.dy=-e.dy):e.y>this.scale.height-e.radius&&(e.y=this.scale.height-e.radius,Math.abs(e.dx)<.5&&(e.dx=x(this.minDeflection,this.maxDeflection)),e.dy=-e.dy)}edgeKill(e){(e.x<0-e.radius||e.x>this.scale.width+e.radius||e.y<0-e.radius||e.y>this.scale.height+e.radius)&&e.kill()}};var v=5,w=20,E=w-v,b=50;var V=(s=>(s[s.Fixed_Small=0]="Fixed_Small",s[s.Fixed_Medium=1]="Fixed_Medium",s[s.Fixed_Large=2]="Fixed_Large",s[s.Speed_Grows=3]="Speed_Grows",s[s.Speed_Shrinks=4]="Speed_Shrinks",s[s.Age_Grows=5]="Age_Grows",s[s.Age_Shrinks=6]="Age_Shrinks",s))(V||{}),M={[0]:i=>5,[1]:i=>10,[2]:i=>15,[3]:i=>v+Math.min(b,i.speed)/b*E,[4]:i=>v+(E-Math.min(b,i.speed)/b*E),[5]:i=>i.age>i.life?w:v+i.age/i.life*E,[6]:i=>i.age>i.life?v:v+(E-i.age/i.life*E)},ct={[0]:i=>5,[1]:i=>10,[2]:i=>15,[3]:M[3],[4]:M[4],[5]:M[5],[6]:M[6]},Z=class{mode=c(V);_init=M[this.mode];_update=M[this.mode];constructor(e){e.addStat("size",V[this.mode])}init(e){e.radius=this._init(e)}update(e,a){let o=this._update(e)}};var P=(n=>(n[n.Speed_Darkens=0]="Speed_Darkens",n[n.Speed_Brightens=1]="Speed_Brightens",n[n.Down_Brightens=2]="Down_Brightens",n[n.Up_Brightens=3]="Up_Brightens",n[n.Right_Brightens=4]="Right_Brightens",n[n.Left_Brightens=5]="Left_Brightens",n[n.Age_Darkens=6]="Age_Darkens",n[n.Age_Brightens=7]="Age_Brightens",n))(P||{}),Ie={[3]:0,[2]:0,[5]:0,[4]:0},L=b/2,Be={[0]:i=>Math.min(b,i.speed)/b,[1]:i=>1-Math.min(b,i.speed)/b,[2]:i=>i.dy<=0?1:Math.min(L,i.dy)/i.dy,[3]:i=>i.dy>=0?1:Math.min(L,-i.dy)/-i.dy,[4]:i=>i.dx<=0?1:Math.min(L,i.dx)/i.dx,[5]:i=>i.dx>=0?1:Math.min(L,-i.dx)/-i.dx,[6]:i=>i.age>i.life?1:i.age/i.life,[7]:i=>i.age>i.life?0:1-i.age/i.life},Te=.3,ke=.5,Ce=.3,p=w*2,me=0,ue=p*w,J=40,Re=[{name:"purple",background:"#0e001d",highlight:"#221431",color1:["#ffffb7","#fcfbb3","#f8f8b0","#f5f4ad","#f2f1aa","#eeeda7","#ebeaa3","#e8e6a0","#e4e39d","#e1df9a","#dedb97","#dad893","#d7d490","#d4d18d","#d0cd8a","#cdca86","#cac683","#c6c380","#c3bf7d","#c0bb7a","#bcb876","#b9b473","#b6b170","#b2ad6d","#afaa6a","#aca666","#a8a363","#a59f60","#a29b5d","#9e9859","#9b9456","#989153","#948d50","#918a4d","#8e8649","#8a8346","#877f43","#847b40","#80783d","#7d7439"],color2:["#c2ffa9","#befca6","#bbf8a3","#b8f5a0","#b4f29d","#b1ee9a","#adeb97","#aae794","#a7e491","#a3e18f","#a0dd8c","#9cda89","#99d786","#96d383","#92d080","#8fcd7d","#8bc97a","#88c677","#85c374","#81bf71","#7ebc6e","#7ab86b","#77b568","#74b265","#70ae62","#6dab5f","#6aa85c","#66a45a","#63a157","#5f9e54","#5c9a51","#59974e","#55934b","#529048","#4e8d45","#4b8942","#48863f","#44833c","#417f39","#3d7c36"]},{name:"red",background:"#200000",highlight:"#341414",color1:["#cdffcb","#cafcc8","#c6f8c4","#c2f5c1","#bff2bd","#bbefba","#b8ebb6","#b4e8b3","#b1e5af","#ade1ac","#aadea8","#a6dba5","#a3d8a2","#9fd49e","#9cd19b","#98ce97","#95cb94","#91c790","#8ec48d","#8ac189","#87bd86","#83ba82","#80b77f","#7cb47c","#78b078","#75ad75","#71aa71","#6ea66e","#6aa36a","#67a067","#639d63","#609960","#5c965c","#599359","#558f55","#528c52","#4e894f","#4b864b","#478248","#447f44"],color2:["#beffff","#bbfbfc","#b7f7f8","#b4f4f5","#b1f0f2","#aeecef","#aae8eb","#a7e4e8","#a4e1e5","#a0dde1","#9dd9de","#9ad5db","#97d1d7","#93ced4","#90cad1","#8dc6ce","#8ac2ca","#86bec7","#83bbc4","#80b7c0","#7cb3bd","#79afba","#76abb6","#73a8b3","#6fa4b0","#6ca0ad","#699ca9","#6698a6","#6295a3","#5f919f","#5c8d9c","#588999","#558595","#528292","#4f7e8f","#4b7a8c","#487688","#457285","#426f82","#3e6b7e"]},{name:"blue",background:"#000a20",highlight:"#141e34",color1:["#fffddf","#fcf9db","#f8f5d7","#f5f1d4","#f2edd0","#efe9cc","#ebe5c8","#e8e1c5","#e5ddc1","#e2d9bd","#ded4ba","#dbd0b6","#d8ccb2","#d5c8af","#d1c4ab","#cec0a7","#cbbca3","#c8b8a0","#c4b49c","#c1b098","#beac95","#bba791","#b7a38d","#b49f8a","#b19b86","#ae9782","#aa937e","#a78f7b","#a48b77","#a08773","#9d8370","#9a7f6c","#977a68","#937664","#907261","#8d6e5d","#8a6a59","#866656","#836252","#805e4e"],color2:["#ffffc0","#fcfbbd","#f8f8b9","#f5f4b6","#f2f1b3","#efedb0","#ebeaad","#e8e6aa","#e5e2a7","#e2dfa4","#dedba0","#dbd89d","#d8d49a","#d5d097","#d1cd94","#cec991","#cbc68e","#c8c28b","#c4bf88","#c1bb84","#beb781","#bbb47e","#b7b07b","#b4ad78","#b1a975","#ada572","#aaa26f","#a79e6b","#a49b68","#a09765","#9d9462","#9a905f","#978c5c","#938959","#908556","#8d8252","#8a7e4f","#867a4c","#837749","#807346"]},{name:"green",highlight:"#142c14",background:"#001800",color1:["#ffbbff","#fbb8fb","#f7b5f7","#f3b1f3","#eeaeef","#eaabeb","#e6a7e7","#e2a4e2","#dea0de","#da9dda","#d59ad6","#d196d2","#cd93ce","#c990ca","#c58cc6","#c189c2","#bc85be","#b882ba","#b47fb6","#b07bb2","#ac78ae","#a875a9","#a471a5","#9f6ea1","#9b6b9d","#976799","#936495","#8f6091","#8b5d8d","#865a89","#825685","#7e5381","#7a507d","#764c79","#724974","#6d4570","#69426c","#653f68","#613b64","#5d3860"],color2:["#ffb994","#fbb691","#f7b38f","#f3af8c","#efac8a","#eba987","#e7a685","#e3a382","#df9f80","#db9c7d","#d7997b","#d39678","#cf9376","#cb8f73","#c78c71","#c3896e","#bf866c","#bb8369","#b77f67","#b37c64","#af7961","#ab765f","#a7735c","#a36f5a","#9f6c57","#9b6955","#966652","#926250","#8e5f4d","#8a5c4b","#865948","#825646","#7e5243","#7a4f41","#764c3e","#72493c","#6e4639","#6a4237","#663f34","#623c31"]},{name:"yellow",highlight:"#383114",background:"#241d00",color1:["#c2ddff","#bedafb","#bbd6f8","#b7d2f4","#b4cef0","#b1cbec","#adc7e9","#aac3e5","#a6bfe1","#a3bcdd","#9fb8da","#9cb4d6","#98b0d2","#95adce","#92a9cb","#8ea5c7","#8ba1c3","#879ebf","#849abc","#8096b8","#7d92b4","#798fb1","#768bad","#7387a9","#6f84a5","#6c80a2","#687c9e","#65789a","#617596","#5e7193","#5b6d8f","#57698b","#546687","#506284","#4d5e80","#495a7c","#465778","#425375","#3f4f71","#3c4b6d"],color2:["#fea3ff","#faa0fb","#f69ef8","#f29bf4","#ee98f0","#e995ec","#e592e9","#e18fe5","#dd8ce1","#d989dd","#d586da","#d084d6","#cc81d2","#c87ece","#c47bcb","#c078c7","#bc75c3","#b772c0","#b36fbc","#af6cb8","#ab6ab4","#a767b1","#a364ad","#9e61a9","#9a5ea5","#965ba2","#92589e","#8e559a","#8a5297","#855093","#814d8f","#7d4a8b","#794788","#754484","#714180","#6c3e7c","#683b79","#643875","#603671","#5c336d"]}],ee=class{constructor(e,a,o,t){this.context=a;this.swallower=o;this.scale=t;switch(this.innerMode=c(P),this.innerMode){case 5:case 4:this.outerMode=D([3,2]);break;case 3:case 2:this.outerMode=D([5,4]);break;default:this.outerMode=c(P,Ie);break}this.prerenderParticles(),this.prerenderSwallower(),e.addStat("background",this.pallet.name),e.addStat("outer color",P[this.outerMode]),e.addStat("inner color",P[this.innerMode]);let r=document.createElement("style");r.textContent=`.highlight { border-color: ${this.pallet.highlight} }`,document.head.append(r)}pallet=D(Re);particlesCanvas=document.createElement("canvas");particlesContext=this.particlesCanvas.getContext("2d");swallowerCanvas=document.createElement("canvas");swallowerContext=this.swallowerCanvas.getContext("2d");innerMode;outerMode;prerenderSwallower(){let e=this.swallower.radius,a=this.swallower.radius*.5,o=e,t=e;this.swallowerCanvas.width=e*2,this.swallowerCanvas.height=e*2;var r=this.swallowerContext.createRadialGradient(o,t,e,o,t,a);r.addColorStop(0,"#00000000"),r.addColorStop(.2,this.pallet.highlight),r.addColorStop(1,"#000000ff"),this.swallowerContext.fillStyle=r,this.swallowerContext.fillRect(0,0,e*2,e*2)}prerenderParticles(){this.particlesCanvas.width=p*(w+1)*2*this.scale.dpr,this.particlesCanvas.height=p*J*this.scale.dpr,this.particlesContext.scale(this.scale.dpr,this.scale.dpr);for(let e=0;e<=w;++e){let a=e*p;for(let o=0;o<J;++o){let t=this.pallet.color1[o],r=this.pallet.color2[o];this.drawOuterGradient(this.particlesContext,p*o,me+a,e,t),this.drawInnerGradient(this.particlesContext,p*o,ue+a,e,r)}}}drawOuterGradient(e,a,o,t,r){let d=o+t,s=a+t,n=Math.floor(t*Te),l=e.createRadialGradient(d,s,t,d,s,n);l.addColorStop(0,r+"00"),l.addColorStop(1,r),e.fillStyle=l,e.beginPath(),e.arc(d,s,t,0,Math.PI*2),e.closePath(),e.fill()}drawInnerGradient(e,a,o,t,r){let d=Math.floor(t*ke),s=Math.floor(t*Ce),n=o+t,l=a+t,h=this.context.createRadialGradient(n,l,d,n,l,s);h.addColorStop(0,r+"00"),h.addColorStop(1,r),e.fillStyle=h,e.beginPath(),e.arc(n,l,d,0,Math.PI*2),e.closePath(),e.fill()}init(e){this.drawParticle(e)}drawParticle(e){let a=Math.floor(e.radius),o=(me+a*p)*this.scale.dpr,t=(ue+a*p)*this.scale.dpr,r=this.pickColor(e,this.outerMode)*p*this.scale.dpr,d=this.pickColor(e,this.innerMode)*p*this.scale.dpr,s=a*2*this.scale.dpr,n=s,l=e.x-e.radius,h=e.y-e.radius,u=e.radius*2,y=u;this.context.drawImage(this.particlesCanvas,o,r,s,n,l,h,u,y),this.context.drawImage(this.particlesCanvas,t,d,s,n,l,h,u,y)}pickColor(e,a){let o=Be[a](e);return Math.floor((J-1)*o)}drawBackground(){let e=this.context;e.fillStyle=this.pallet.background,e.fillRect(0,0,this.scale.width,this.scale.height);let a=this.swallower.x,o=this.swallower.y,t=this.swallower.radius;e.drawImage(this.swallowerCanvas,a-t,o-t),S.isTracing&&e.drawImage(this.particlesCanvas,0,0)}};var te=(t=>(t[t.Fleeting=3]="Fleeting",t[t.Low=10]="Low",t[t.Medium=30]="Medium",t[t.High=60]="High",t))(te||{}),Ae={[3]:1,[10]:5,[30]:5,[60]:5},be=(t=>(t[t.None=1]="None",t[t.Slow=.9]="Slow",t[t.Medium=.7]="Medium",t[t.Fast=.5]="Fast",t))(be||{}),Le=0,Ge=.1,Ue=.1,Ne=.5,ie=class{longevity=c(te,Ae);oldDecline=this.longevity*Ue;stoppedDecline=c(be);frame_oldDecline=0;frame_stoppedDecline=0;constructor(e){e.addStat("longevity",te[this.longevity].toLowerCase())}init(e){e.health=1,e.life=this.longevity+this.longevity*x(Le,Ge)}frame(e){this.frame_oldDecline=this.oldDecline*e,this.frame_stoppedDecline=this.stoppedDecline*e}update(e,a){e.age+=a,e.isOld&&!e.swallowed&&(e.health-=this.frame_oldDecline),this.stoppedDecline!=1&&e.speed<Ne&&(e.health-=this.frame_stoppedDecline)}};window.onhashchange=()=>window.location.reload();window.onload=()=>{let i=document.createElement("canvas");document.body.appendChild(i);let e=i.getContext("2d");if(e==null)throw new Error("canvas 2d context is not supported");let a=new z,o=new R(a),t=new G(a),r=new W(a,e,t),d=new q(a,r),s=new K(a,e,o,d,t,r),n=new ee(a,e,d,r),l=new j(a,i,r),h=new F(a,r,l),u=new ie(a),y=new Z(a);function _(pe){let g=o.getDT(pe);if(n.drawBackground(),l.frame(g),d.frame(g),u.frame(g),s.frame(g),t.forEach(m=>{d.update(m,g),s.update(m),u.update(m,g),y.update(m,g),h.update(m),l.update(m,g),m.isDead?t.remove(m):n.drawParticle(m)}),!t.isFull&&h.emit(g)){let m=new S;h.init_speed(m),u.init(m),y.init(m),h.init_position(m),n.init(m),t.add(m)}window.requestAnimationFrame(_)}_(o.last)};
</script>
    <style>
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
        }
        body { 
            background-color: black; 
            color: dimgrey; 
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: sans-serif;
        }
        canvas {
            position:absolute;
            height: 100%;
            width: 100%;
            animation: fadeIn 2s;
            z-index: 1;
            touch-action: none;
        }
        @keyframes fadeIn {
              0% {opacity:0;}
            100% {opacity:1;}
        }
        .hidden {
          display:none
        }
        #info {
          z-index: 2;
        }
        
        section {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background:black;
          border-width: 3px;
          border-style: ridge;
          padding: 20px;
          margin: 0px;
          color:lightgray;
          display: flex;
          flex-direction: column;
          align-items: center;
          box-shadow: 0px 0px 3px 3px black;
        }
        section > h1 {
          margin:0;
        }
        section > div {
          width: 100%;
        }

        a {
          color:lightslategray
        }

        dl {
          display: grid;
          grid-template-columns: max-content max-content;
        }
        dt {
          grid-column-start: 1;
        }
        dd {
          grid-column-start: 2;
          margin-left: 3px;
          text-align: right;
        }

        #full_screen {
          position: absolute;
          top: 0;
          right: 0;
          border-bottom-left-radius: 50%;
          padding-right: 5px;
          padding-top: 5px;
          align-items: end;
          justify-content: start;
        }

        #show_info {
          position: absolute;
          bottom: 0;
          right: 0;
          border-top-left-radius: 50%;
          padding-right: 5px;
          padding-bottom: 5px;
          font-size: 30px;
          align-items: end;
          justify-content: end;
        }

        .corner {
          background: black;
          z-index: 2;
          width: 40px;
          height: 40px;
          flex-direction: column;
          display: flex;
          opacity: 0;
          transition: opacity 1s ease-in-out;
        }

        .corner:hover {
          opacity: 0.8;
          transition: opacity .5s ease-in-out;
        }

     </style>
  </head>
  <body>
    <span>(loading...)</span>
    <section id="info" class="hidden highlight">
      <h1>IParT #<span id="token_id"></span></h1>
      <nav><a href="https://eyeree.me/IParT" target="top">info</a></nav>
      <dl id="stats">
      </dl>
    </section>
    <div id="full_screen" class="corner">
      <svg width="30" height="30" xmlns="http://www.w3.org/2000/svg">
        <rect id="svg_11" height="12" width="4" y="18" x="26" stroke-width="0" stroke="#000000" fill="dimgray"/>
        <rect id="svg_13" height="12" width="4" y="0" x="26" stroke-width="0" stroke="#000000" fill="dimgray"/>
        <rect id="svg_14" height="12" width="4" y="18" x="0" stroke-width="0" stroke="#000000" fill="dimgray"/>
        <rect id="svg_15" height="12" width="4" y="0" x="0" stroke-width="0" stroke="#000000" fill="dimgray"/>
        <rect id="svg_16" height="4" width="12" y="26" x="18" stroke-width="0" stroke="#000000" fill="dimgray"/>
        <rect id="svg_17" height="4" width="12" y="0" x="0" stroke-width="0" stroke="#000000" fill="dimgray"/>
        <rect id="svg_18" height="4" width="12" y="0" x="18" stroke-width="0" stroke="#000000" fill="dimgray"/>
        <rect id="svg_19" height="4" width="12" y="26" x="0" stroke-width="0" stroke="#000000" fill="dimgray"/>
       </svg>
    </div>
    <div id="show_info" class="corner">
      <svg width="30" height="30" xmlns="http://www.w3.org/2000/svg">
        <ellipse stroke="dimgray" ry="14" rx="14" id="svg_20" cy="15" cx="15" stroke-width="2" fill="none"/>
        <rect id="svg_15" height="12" width="4" y="12.23529" x="13" stroke-width="0" stroke="#000000" fill="dimgray"/>
        <ellipse stroke-width="0" ry="2.35294" rx="2.23529" id="svg_22" cy="8.52941" cx="15" stroke="#000000" fill="dimgray"/>
       </svg>
    </div>
  </body>
</html>